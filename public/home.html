<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="/efyoos_logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>efyoos.com | MANAGER HUB</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
        :root {
            --bg:#0B0E14; --bg-card:#13181F; --bg-hover:#181E28;
            --green:#00F59B; --green-dim:rgba(0,245,155,0.08); --green-glow:rgba(0,245,155,0.15);
            --silver:#94A3B8; --white:#F0F4F8; --muted:#4A5568;
            --border:rgba(148,163,184,0.10); --border-hover:rgba(0,245,155,0.25);
        }
        html { scroll-behavior:smooth; }
        body { font-family:'Montserrat',sans-serif; font-weight:300; background:var(--bg); color:var(--white); min-height:100vh; overflow-x:hidden; }
        body::before { content:''; position:fixed; inset:0; background:radial-gradient(ellipse 80% 50% at 10% 0%,rgba(0,245,155,0.04) 0%,transparent 60%),radial-gradient(ellipse 60% 40% at 90% 100%,rgba(148,163,184,0.03) 0%,transparent 60%); pointer-events:none; z-index:0; }
        .page { position:relative; z-index:1; max-width:1100px; margin:0 auto; padding:0 28px; }

        /* HEADER */
        header { display:flex; align-items:center; justify-content:space-between; padding:32px 0 0; }
        .logo { display:flex; align-items:center; gap:10px; text-decoration:none; }
        .logo-dot { width:10px; height:10px; border-radius:50%; background:var(--green); box-shadow:0 0 10px var(--green); animation:pulse-dot 2s ease-in-out infinite; }
        @keyframes pulse-dot { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:0.6;transform:scale(0.85)} }
        .logo-name { font-family:'Playfair Display',serif; font-weight:700; font-size:20px; letter-spacing:0.5px; color:var(--white); }
        .logo-name span { color:var(--green); }
        .header-right { display:flex; align-items:center; gap:20px; }
        .hotel-badge { padding:6px 14px; border:1px solid var(--border); border-radius:100px; font-size:11px; font-weight:600; letter-spacing:1.5px; color:var(--silver); text-transform:uppercase; }
        .sign-out { font-size:12px; font-weight:500; color:var(--muted); cursor:pointer; background:none; border:none; transition:color 0.2s; letter-spacing:0.5px; }
        .sign-out:hover { color:var(--silver); }

        /* LANG SWITCHER */
        .lang-switcher { position:relative; }
        .lang-btn { background:var(--bg-card); border:1px solid var(--border); border-radius:8px; color:var(--silver); padding:7px 14px; cursor:pointer; font-size:12px; font-weight:600; letter-spacing:1px; display:flex; align-items:center; gap:6px; }
        .lang-btn:hover { border-color:var(--border-hover); color:var(--white); }
        .lang-drop { display:none; position:absolute; top:calc(100% + 8px); right:0; background:var(--bg-card); border:1px solid var(--border); border-radius:10px; min-width:130px; box-shadow:0 8px 24px rgba(0,0,0,0.4); z-index:100; overflow:hidden; }
        .lang-drop.open { display:block; }
        .lang-opt { display:block; width:100%; padding:10px 16px; background:none; border:none; color:var(--silver); font-size:13px; cursor:pointer; text-align:left; transition:background 0.15s; }
        .lang-opt:hover { background:var(--bg-hover); color:var(--white); }

        /* GREETING */
        .greeting-section { padding:64px 0 56px; }
        .greeting-eyebrow { font-size:12px; font-weight:600; letter-spacing:3px; text-transform:uppercase; color:var(--green); margin-bottom:16px; opacity:0; animation:fadeUp 0.6s ease-out 0.1s forwards; }
        .greeting-title { font-family:'Playfair Display',serif; font-size:clamp(36px,5vw,54px); font-weight:600; line-height:1.15; color:var(--white); margin-bottom:14px; opacity:0; animation:fadeUp 0.6s ease-out 0.2s forwards; }
        .greeting-title em { font-style:italic; color:var(--green); }
        .greeting-sub { font-size:15px; font-weight:300; color:var(--silver); opacity:0; animation:fadeUp 0.6s ease-out 0.3s forwards; }
        @keyframes fadeUp { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }

        /* STATS BAR */
        .stats-bar { display:flex; gap:1px; background:var(--border); border-radius:16px; overflow:hidden; margin-bottom:48px; opacity:0; animation:fadeUp 0.6s ease-out 0.4s forwards; }
        .stat-item { flex:1; background:var(--bg-card); padding:18px 24px; display:flex; flex-direction:column; gap:4px; transition:background 0.2s; }
        .stat-item:hover { background:var(--bg-hover); }
        .stat-label { font-size:10px; font-weight:600; letter-spacing:1.5px; text-transform:uppercase; color:var(--muted); }
        .stat-value { font-family:'Playfair Display',serif; font-size:26px; font-weight:700; color:var(--white); }
        .stat-value.green { color:var(--green); }

        /* SECTION LABEL */
        .section-label { font-size:10px; font-weight:600; letter-spacing:3px; text-transform:uppercase; color:var(--muted); margin-bottom:20px; opacity:0; animation:fadeUp 0.6s ease-out 0.5s forwards; }

        /* CARDS */
        .cards-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-bottom:16px; }
        .cards-grid-2 { display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-bottom:56px; }
        .card { background:var(--bg-card); border:1px solid var(--border); border-radius:20px; padding:28px; cursor:pointer; text-decoration:none; display:flex; flex-direction:column; gap:0; position:relative; overflow:hidden; transition:border-color 0.25s,background 0.25s,transform 0.25s; opacity:0; color:var(--white); }
        .card:hover { background:var(--bg-hover); border-color:var(--border-hover); transform:translateY(-3px); }
        .card::after { content:''; position:absolute; inset:0; background:radial-gradient(circle at 50% 0%,rgba(0,245,155,0.06),transparent 70%); opacity:0; transition:opacity 0.3s; border-radius:20px; }
        .card:hover::after { opacity:1; }

        .card.active { animation:cardIn 0.5s ease-out forwards; }
        .card.active:nth-child(1) { animation-delay:0.55s; }
        .card.active:nth-child(2) { animation-delay:0.65s; }
        .card.active:nth-child(3) { animation-delay:0.75s; }
        .cards-grid-2 .card.active:nth-child(1) { animation-delay:0.85s; }
        .cards-grid-2 .card.active:nth-child(2) { animation-delay:0.95s; }
        .cards-grid-2 .card.active:nth-child(3) { animation-delay:1.05s; }
        @keyframes cardIn { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }

        .card.locked { opacity:0; cursor:default; animation:cardIn 0.5s ease-out forwards; }
        .card.locked:hover { transform:none; border-color:var(--border); background:var(--bg-card); }
        .card.locked::after { display:none; }

        .card-icon { width:44px; height:44px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:20px; margin-bottom:20px; position:relative; z-index:1; }
        .icon-green  { background:var(--green-dim); border:1px solid rgba(0,245,155,0.2); }
        .icon-silver { background:rgba(148,163,184,0.06); border:1px solid rgba(148,163,184,0.15); }
        .icon-locked { background:rgba(74,85,104,0.15); border:1px solid rgba(74,85,104,0.2); filter:grayscale(1); opacity:0.5; }

        .card-tag { font-size:9px; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--green); margin-bottom:8px; position:relative; z-index:1; }
        .card-tag.coming { color:var(--muted); }
        .card-title { font-family:'Playfair Display',serif; font-size:20px; font-weight:600; color:var(--white); margin-bottom:10px; line-height:1.2; position:relative; z-index:1; }
        .card.locked .card-title { color:var(--muted); }
        .card-desc { font-size:13px; font-weight:300; color:var(--silver); line-height:1.6; flex:1; position:relative; z-index:1; }
        .card.locked .card-desc { color:var(--muted); opacity:0.7; }
        .card-arrow { margin-top:20px; display:flex; align-items:center; gap:6px; font-size:12px; font-weight:600; color:var(--green); letter-spacing:0.5px; position:relative; z-index:1; transition:gap 0.2s; }
        .card:hover .card-arrow { gap:10px; }
        .card-lock { margin-top:20px; display:inline-flex; align-items:center; gap:6px; font-size:11px; font-weight:500; color:var(--muted); background:rgba(74,85,104,0.1); border:1px solid rgba(74,85,104,0.2); border-radius:100px; padding:5px 12px; width:fit-content; }

        /* FOOTER */
        footer { border-top:1px solid var(--border); padding:24px 0; display:flex; align-items:center; justify-content:space-between; }
        .foot-left { font-size:12px; color:var(--muted); font-weight:300; }
        .foot-right { font-size:11px; color:var(--muted); display:flex; align-items:center; gap:6px; }
        .status-live { display:inline-flex; align-items:center; gap:5px; font-size:10px; font-weight:600; letter-spacing:1px; text-transform:uppercase; color:var(--green); }
        .status-dot { width:6px; height:6px; border-radius:50%; background:var(--green); animation:pulse-dot 2s infinite; }

        /* QR MODAL */
        .modal-overlay { display:none; position:fixed; inset:0; background:rgba(11,14,20,0.92); backdrop-filter:blur(8px); z-index:100; align-items:center; justify-content:center; }
        .modal-overlay.open { display:flex; }
        .modal-box { background:#13181F; border:1px solid rgba(0,245,155,0.2); border-radius:24px; padding:40px; max-width:380px; width:90%; text-align:center; position:relative; }
        .modal-close { position:absolute; top:16px; right:16px; background:none; border:none; color:#4A5568; font-size:22px; cursor:pointer; line-height:1; }
        .modal-close:hover { color:var(--white); }
        .qr-tag { font-size:10px; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--green); margin-bottom:12px; }
        .qr-title { font-family:'Playfair Display',serif; font-size:22px; font-weight:600; color:var(--white); margin-bottom:6px; }
        .qr-desc { font-size:13px; color:var(--silver); margin-bottom:28px; font-weight:300; }
        .qr-frame { display:flex; align-items:center; justify-content:center; margin-bottom:24px; background:#fff; border-radius:12px; padding:20px; }
        .qr-frame img { width:180px; height:180px; }
        .qr-url { font-size:12px; color:#4A5568; margin-bottom:20px; font-weight:300; word-break:break-all; }
        .qr-print-btn { width:100%; background:var(--green); color:#0B0E14; border:none; border-radius:12px; padding:14px; font-size:14px; font-weight:700; cursor:pointer; letter-spacing:0.5px; }

        /* RESPONSIVE */
        @media (max-width:768px) {
            .cards-grid, .cards-grid-2 { grid-template-columns:1fr; }
            .stats-bar { flex-direction:column; gap:1px; }
            .greeting-section { padding:40px 0 36px; }
        }
        @media (max-width:480px) { .page { padding:0 16px; } header { padding:20px 0 0; } }
    </style>
</head>
<body>
<div class="page">

    <!-- HEADER -->
    <header>
        <a href="/" class="logo">
            <div class="logo-dot"></div>
            <span class="logo-name">Efyoos <span>COMMAND</span></span>
        </a>
        <div class="header-right">
            <div class="lang-switcher">
                <button class="lang-btn" id="langBtn">EN â–¾</button>
                <div class="lang-drop" id="langDrop">
                    <button class="lang-opt">ğŸ‡¬ğŸ‡§ English</button>
                    <button class="lang-opt">ğŸ‡«ğŸ‡· FranÃ§ais</button>
                    <button class="lang-opt">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
                </div>
            </div>
            <span class="hotel-badge" id="hotelBadge">H01312</span>
            <button class="sign-out" id="signOutBtn">Sign out</button>
        </div>
    </header>

    <!-- GREETING -->
    <section class="greeting-section">
        <p class="greeting-eyebrow" id="timeLabel">Good morning</p>
        <h1 class="greeting-title">
            Welcome back,<br><em id="adminName">Manager</em>
        </h1>
        <p class="greeting-sub" id="dateLabel">Loading...</p>
    </section>

    <!-- STATS BAR -->
    <div class="stats-bar">
        <div class="stat-item">
            <span class="stat-label" id="lblActive">Active Requests</span>
            <span class="stat-value green" id="statActive">â€”</span>
        </div>
        <div class="stat-item">
            <span class="stat-label" id="lblCompleted">Completed Today</span>
            <span class="stat-value" id="statCompleted">â€”</span>
        </div>
        <div class="stat-item">
            <span class="stat-label" id="lblResponse">Avg. Response</span>
            <span class="stat-value" id="statResponse">â€”</span>
        </div>
        <div class="stat-item">
            <span class="stat-label" id="lblStaff">Staff Online</span>
            <span class="stat-value" id="statStaff">â€”</span>
        </div>
    </div>

    <!-- TOOLS -->
    <p class="section-label" id="lblTools">Your Tools</p>

    <div class="cards-grid">
        <a href="/dashboard" class="card active">
            <div class="card-icon icon-green">ğŸ–¥ï¸</div>
            <p class="card-tag" id="tag1">Live</p>
            <h2 class="card-title" id="title1">Manager Dashboard</h2>
            <p class="card-desc" id="desc1">Monitor all guest requests in real-time. Track staff assignments, response times, and complete tasks.</p>
            <div class="card-arrow" id="cta1">Open Dashboard â†’</div>
        </a>

        <a href="/guest" class="card active">
            <div class="card-icon icon-silver">ğŸ“±</div>
            <p class="card-tag" id="tag2">Active</p>
            <h2 class="card-title" id="title2">Guest Request Page</h2>
            <p class="card-desc" id="desc2">The page your guests use to submit requests. Share via QR code in rooms or direct link.</p>
            <div class="card-arrow" id="cta2">Open Page â†’</div>
        </a>

        <div class="card active" id="qrCard">
            <div class="card-icon icon-green">â¬›</div>
            <p class="card-tag" id="tag3">Utility</p>
            <h2 class="card-title" id="title3">QR Code Generator</h2>
            <p class="card-desc" id="desc3">Generate and print a QR code linking guests directly to the request page. Place in each room.</p>
            <div class="card-arrow" id="cta3">Generate QR â†’</div>
        </div>
    </div>

    <!-- COMING SOON -->
    <p class="section-label" id="lblComingSoon" style="margin-top:32px; animation-delay:0.8s;">Coming Soon</p>

    <div class="cards-grid-2">
        <div class="card locked">
            <div class="card-icon icon-locked">ğŸ“Š</div>
            <p class="card-tag coming">Coming Soon</p>
            <h2 class="card-title" id="title4">Analytics</h2>
            <p class="card-desc" id="desc4">Weekly and monthly reports. Peak hours, top request types, staff performance, and satisfaction trends.</p>
            <div class="card-lock" id="lock1">ğŸ”’ In Development</div>
        </div>

        <div class="card locked">
            <div class="card-icon icon-locked">ğŸ‘¥</div>
            <p class="card-tag coming">Coming Soon</p>
            <h2 class="card-title" id="title5">Staff Management</h2>
            <p class="card-desc" id="desc5">Add and manage staff profiles. Set availability, categories, and WhatsApp numbers from one place.</p>
            <div class="card-lock" id="lock2">ğŸ”’ In Development</div>
        </div>

        <div class="card locked">
            <div class="card-icon icon-locked">ğŸ¤–</div>
            <p class="card-tag coming">Coming Soon</p>
            <h2 class="card-title" id="title6">AI Monitor</h2>
            <p class="card-desc" id="desc6">Intelligent system health monitoring. Detects silent failures and alerts before problems escalate.</p>
            <div class="card-lock" id="lock3">ğŸ”’ In Development</div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <span class="foot-left">Â© 2026 Efyoos Command Â· <span id="footHotel"></span></span>
        <div class="foot-right">
            <span class="status-live" id="sysLive">
                <span class="status-dot"></span>
                System Live
            </span>
        </div>
    </footer>

</div>

<!-- QR MODAL -->
<div class="modal-overlay" id="qrModal">
    <div class="modal-box">
        <button class="modal-close" id="closeQrBtn">Ã—</button>
        <p class="qr-tag">QR Code</p>
        <h3 class="qr-title">Guest Request Page</h3>
        <p class="qr-desc">Print and place this in each room</p>
        <div class="qr-frame">
            <img id="qrImg" src="" alt="QR Code">
        </div>
        <p class="qr-url" id="qrUrl"></p>
        <button class="qr-print-btn" id="printQrBtn">ğŸ–¨ï¸ Print QR Code</button>
    </div>
</div>

<script>
    // â”€â”€â”€ SAFE SUPABASE INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const SUPABASE_URL = 'https://swuqyrbknkobamnruurl.supabase.co';
    const SUPABASE_KEY = 'sb_publishable_TWLdfpE7RjUku1XgPLNSvQ_dpCh8kN5';
    const GUEST_URL = window.location.origin + '/guest';

    var sb = null;
    try {
        if (window.supabase && typeof window.supabase.createClient === 'function') {
            sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        }
    } catch (e) {
        console.warn('Supabase init failed:', e);
    }

    // â”€â”€â”€ TRANSLATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    var T = {
        en: {
            signOut: 'Sign out',
            lblTools: 'Your Tools',
            lblComingSoon: 'Coming Soon',
            lblActive: 'Active Requests',
            lblCompleted: 'Completed Today',
            lblResponse: 'Avg. Response',
            lblStaff: 'Staff Online',
            sysLive: 'System Live',
            greetMorn: 'Good morning',
            greetAfter: 'Good afternoon',
            greetEvening: 'Good evening',
            tag1:'Live', title1:'Manager Dashboard', desc1:'Monitor all guest requests in real-time. Track staff assignments, response times, and complete tasks.', cta1:'Open Dashboard â†’',
            tag2:'Active', title2:'Guest Request Page', desc2:'The page your guests use to submit requests. Share via QR code in rooms or direct link.', cta2:'Open Page â†’',
            tag3:'Utility', title3:'QR Code Generator', desc3:'Generate and print a QR code linking guests directly to the request page. Place in each room.', cta3:'Generate QR â†’',
            title4:'Analytics', desc4:'Weekly and monthly reports. Peak hours, top request types, staff performance, and satisfaction trends.',
            title5:'Staff Management', desc5:'Add and manage staff profiles. Set availability, categories, and WhatsApp numbers from one place.',
            title6:'AI Monitor', desc6:'Intelligent system health monitoring. Detects silent failures and alerts before problems escalate.',
            locked: 'ğŸ”’ In Development'
        },
        fr: {
            signOut: 'DÃ©connexion',
            lblTools: 'Vos Outils',
            lblComingSoon: 'BientÃ´t Disponible',
            lblActive: 'Demandes Actives',
            lblCompleted: 'ComplÃ©tÃ©es Aujourd\u2019hui',
            lblResponse: 'RÃ©p. Moyenne',
            lblStaff: 'Personnel En Ligne',
            sysLive: 'SystÃ¨me Actif',
            greetMorn: 'Bonjour',
            greetAfter: 'Bon aprÃ¨s-midi',
            greetEvening: 'Bonsoir',
            tag1:'En Direct', title1:'Tableau de Bord Manager', desc1:'Surveillez toutes les demandes en temps rÃ©el. Suivez les assignations et les temps de rÃ©ponse.', cta1:'Ouvrir â†’',
            tag2:'Actif', title2:'Page des Demandes Clients', desc2:'La page que vos clients utilisent pour soumettre des demandes. Partagez via QR code.', cta2:'Ouvrir â†’',
            tag3:'Utilitaire', title3:'GÃ©nÃ©rateur de QR Code', desc3:'GÃ©nÃ©rez et imprimez un QR code pour les chambres.', cta3:'GÃ©nÃ©rer QR â†’',
            title4:'Analytiques', desc4:'Rapports hebdomadaires et mensuels. Heures de pointe et tendances de satisfaction.',
            title5:'Gestion du Personnel', desc5:'Ajoutez et gÃ©rez les profils du personnel. DÃ©finissez les disponibilitÃ©s.',
            title6:'Moniteur IA', desc6:'Surveillance intelligente de la santÃ© du systÃ¨me. DÃ©tecte les dÃ©faillances silencieuses.',
            locked: 'ğŸ”’ En DÃ©veloppement'
        },
        ar: {
            signOut: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬',
            lblTools: 'Ø£Ø¯ÙˆØ§ØªÙƒ',
            lblComingSoon: 'Ù‚Ø±ÙŠØ¨Ø§Ù‹',
            lblActive: 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©',
            lblCompleted: 'Ù…ÙƒØªÙ…Ù„Ø© Ø§Ù„ÙŠÙˆÙ…',
            lblResponse: 'Ù…ØªÙˆØ³Ø· Ø§Ù„Ø±Ø¯',
            lblStaff: 'Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ† Ù…ØªØµÙ„ÙˆÙ†',
            sysLive: 'Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø¨Ø§Ø´Ø±',
            greetMorn: 'ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±',
            greetAfter: 'Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±',
            greetEvening: 'Ù…Ø³Ø§Ø¡ Ø§Ù„Ù†ÙˆØ±',
            tag1:'Ù…Ø¨Ø§Ø´Ø±', title1:'Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±', desc1:'Ø±Ø§Ù‚Ø¨ Ø¬Ù…ÙŠØ¹ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø²Ù„Ø§Ø¡ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ. ØªØªØ¨Ø¹ Ø§Ù„ØªØ¹ÙŠÙŠÙ†Ø§Øª ÙˆØ£ÙˆÙ‚Ø§Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©.', cta1:'ÙØªØ­ â†’',
            tag2:'Ù†Ø´Ø·', title2:'ØµÙØ­Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø²Ù„Ø§Ø¡', desc2:'Ø§Ù„ØµÙØ­Ø© Ø§Ù„ØªÙŠ ÙŠØ³ØªØ®Ø¯Ù…Ù‡Ø§ Ù†Ø²Ù„Ø§Ø¤Ùƒ Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨Ø§Øª. Ø´Ø§Ø±ÙƒÙ‡Ø§ Ø¹Ø¨Ø± Ø±Ù…Ø² QR.', cta2:'ÙØªØ­ â†’',
            tag3:'Ø£Ø¯Ø§Ø©', title3:'Ù…ÙˆÙ„Ù‘Ø¯ Ø±Ù…Ø² QR', desc3:'Ø£Ù†Ø´Ø¦ ÙˆØ§Ø·Ø¨Ø¹ Ø±Ù…Ø² QR ÙŠØ±Ø¨Ø· Ø§Ù„Ù†Ø²Ù„Ø§Ø¡ Ø¨ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª.', cta3:'Ø¥Ù†Ø´Ø§Ø¡ QR â†’',
            title4:'Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª', desc4:'ØªÙ‚Ø§Ø±ÙŠØ± Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© ÙˆØ´Ù‡Ø±ÙŠØ©. Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø°Ø±ÙˆØ© ÙˆØ§ØªØ¬Ø§Ù‡Ø§Øª Ø±Ø¶Ø§ Ø§Ù„Ù†Ø²Ù„Ø§Ø¡.',
            title5:'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†', desc5:'Ø£Ø¶Ù ÙˆØ£Ø¯Ø± Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†. Ø­Ø¯Ø¯ Ø§Ù„ØªÙˆÙØ± ÙˆØ£Ø±Ù‚Ø§Ù… ÙˆØ§ØªØ³Ø§Ø¨.',
            title6:'Ù…Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ', desc6:'Ù…Ø±Ø§Ù‚Ø¨Ø© Ø°ÙƒÙŠØ© Ù„ØµØ­Ø© Ø§Ù„Ù†Ø¸Ø§Ù…. ÙŠÙƒØªØ´Ù Ø§Ù„Ø£Ø¹Ø·Ø§Ù„ Ø§Ù„ØµØ§Ù…ØªØ© Ù‚Ø¨Ù„ ØªØµØ§Ø¹Ø¯Ù‡Ø§.',
            locked: 'ğŸ”’ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±'
        }
    };

    // â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    var currentLang = localStorage.getItem('efyoos-lang') || 'en';

    // â”€â”€â”€ GREETING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function initGreeting() {
        var name = localStorage.getItem('efyoos-admin-name') || 'Manager';
        var hotelId = localStorage.getItem('efyoos-hotel-id') || 'H01312';

        document.getElementById('adminName').textContent = name;
        document.getElementById('hotelBadge').textContent = hotelId;
        document.getElementById('footHotel').textContent = hotelId;

        updateGreetingTime();
        updateDate();
    }

    function updateGreetingTime() {
        var t = T[currentLang];
        var hour = new Date().getHours();
        var greet = hour < 12 ? t.greetMorn : hour < 18 ? t.greetAfter : t.greetEvening;
        document.getElementById('timeLabel').textContent = greet;
    }

    function updateDate() {
        var localeMap = { en:'en-US', fr:'fr-FR', ar:'ar-SA' };
        var locale = localeMap[currentLang] || 'en-US';
        document.getElementById('dateLabel').textContent = new Date().toLocaleDateString(locale, {
            weekday:'long', year:'numeric', month:'long', day:'numeric'
        });
    }

    // â”€â”€â”€ STATS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function loadStats() {
        if (!sb) return;
        var hotelId = localStorage.getItem('efyoos-hotel-id') || 'H01312';

        sb.from('guest_requests')
            .select('status, created_at')
            .eq('hotel_id', hotelId)
            .then(function(res) {
                var data = res.data;
                if (!data) return;
                var today = new Date().toDateString();
                var active = data.filter(function(r) {
                    return !['completed','failed','cancelled'].includes(r.status);
                }).length;
                var completed = data.filter(function(r) {
                    return r.status === 'completed' && new Date(r.created_at).toDateString() === today;
                }).length;
                document.getElementById('statActive').textContent = active;
                document.getElementById('statCompleted').textContent = completed;
                document.getElementById('statResponse').textContent = '< 2 min';
            })
            .catch(function(e) { console.warn('Stats error:', e); });

        sb.from('staff')
            .select('id')
            .eq('hotel_id', hotelId)
            .eq('is_active', true)
            .then(function(res) {
                document.getElementById('statStaff').textContent = res.data ? res.data.length : 'â€”';
            })
            .catch(function() {});
    }

    // â”€â”€â”€ LANGUAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function toggleLang() {
        document.getElementById('langDrop').classList.toggle('open');
    }

    function setLang(lang) {
        currentLang = lang;
        localStorage.setItem('efyoos-lang', lang);
        document.getElementById('langBtn').textContent = lang.toUpperCase() + ' â–¾';
        document.getElementById('langDrop').classList.remove('open');
        document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
        document.documentElement.lang = lang;

        var t = T[lang];

        // Sign out + labels
        document.getElementById('signOutBtn').textContent = t.signOut;
        document.getElementById('lblTools').textContent = t.lblTools;
        document.getElementById('lblComingSoon').textContent = t.lblComingSoon;
        document.getElementById('sysLive').innerHTML = '<span class="status-dot"></span>' + t.sysLive;

        // Stat labels
        document.getElementById('lblActive').textContent = t.lblActive;
        document.getElementById('lblCompleted').textContent = t.lblCompleted;
        document.getElementById('lblResponse').textContent = t.lblResponse;
        document.getElementById('lblStaff').textContent = t.lblStaff;

        // Active cards
        ['1','2','3'].forEach(function(n) {
            var tagEl = document.getElementById('tag' + n);
            var titleEl = document.getElementById('title' + n);
            var descEl = document.getElementById('desc' + n);
            var ctaEl = document.getElementById('cta' + n);
            if (tagEl) tagEl.textContent = t['tag' + n];
            if (titleEl) titleEl.textContent = t['title' + n];
            if (descEl) descEl.textContent = t['desc' + n];
            if (ctaEl) ctaEl.textContent = t['cta' + n];
        });

        // Locked cards
        ['4','5','6'].forEach(function(n) {
            var titleEl = document.getElementById('title' + n);
            var descEl = document.getElementById('desc' + n);
            var lockEl = document.getElementById('lock' + (parseInt(n) - 3));
            if (titleEl) titleEl.textContent = t['title' + n];
            if (descEl) descEl.textContent = t['desc' + n];
            if (lockEl) lockEl.textContent = t.locked;
        });

        // Update time and date in new language
        updateGreetingTime();
        updateDate();
    }

    // â”€â”€â”€ QR CODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function showQR() {
        var url = GUEST_URL;
        var qrApi = 'https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=' + encodeURIComponent(url) + '&color=0B0E14&bgcolor=ffffff&margin=10';
        document.getElementById('qrImg').src = qrApi;
        document.getElementById('qrUrl').textContent = url;
        document.getElementById('qrModal').classList.add('open');
    }

    function closeQR() {
        document.getElementById('qrModal').classList.remove('open');
    }

    function printQR() {
        var img = document.getElementById('qrImg').src;
        var url = document.getElementById('qrUrl').textContent;
        var win = window.open('', '_blank');
        win.document.write('<html><head><title>Efyoos QR Code</title><style>body{font-family:sans-serif;text-align:center;padding:40px}img{width:250px;height:250px;margin:20px 0}@media print{button{display:none}}</style></head><body><h2>Efyoos â€” Guest Requests</h2><p>Scan to submit a request</p><p style="font-size:11px;color:#999">' + url + '</p><br><img src="' + img + '" alt="QR Code"><br><p style="margin-top:20px;font-size:12px;color:#aaa">Powered by Efyoos Command</p><button onclick="window.print()" style="margin-top:24px;padding:10px 24px;font-size:14px;cursor:pointer">ğŸ–¨ï¸ Print</button></body></html>');
        win.document.close();
        setTimeout(function() { win.print(); }, 500);
    }

    // â”€â”€â”€ SIGN OUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function signOut() {
        localStorage.removeItem('efyoos-admin-name');
        localStorage.removeItem('efyoos-admin-email');
        localStorage.removeItem('efyoos-hotel-id');
        window.location.href = '/';
    }

    // â”€â”€â”€ EVENT LISTENERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('langBtn').addEventListener('click', function(e) {
        e.stopPropagation();
        toggleLang();
    });

    document.addEventListener('click', function(e) {
        var ls = document.querySelector('.lang-switcher');
        if (ls && !ls.contains(e.target)) {
            document.getElementById('langDrop').classList.remove('open');
        }
    });

    // Lang options
    var langOpts = document.querySelectorAll('.lang-opt');
    var langs = ['en', 'fr', 'ar'];
    langOpts.forEach(function(btn, i) {
        btn.addEventListener('click', function() { setLang(langs[i]); });
    });

    document.getElementById('qrCard').addEventListener('click', showQR);
    document.getElementById('closeQrBtn').addEventListener('click', closeQR);
    document.getElementById('printQrBtn').addEventListener('click', printQR);
    document.getElementById('signOutBtn').addEventListener('click', signOut);

    document.getElementById('qrModal').addEventListener('click', function(e) {
        if (e.target === this) closeQR();
    });

    window.addEventListener('pageshow', function() {
        document.body.style.overflow = '';
    });

    // â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    initGreeting();
    loadStats();
    setInterval(loadStats, 60000);

    // Apply saved language
    if (currentLang !== 'en') {
        setLang(currentLang);
    } else {
        document.getElementById('langBtn').textContent = 'EN â–¾';
    }
</script>
</body>
</html>
